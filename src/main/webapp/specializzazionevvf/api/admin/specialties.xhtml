<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/template.xhtml">
	
	<ui:define name="title">
        Specialties
    </ui:define>

	<ui:define name="implementation">
		<h:form id="form">
			<p:toolbar styleClass="mb-3">
	            <p:toolbarGroup>
	                <p:commandButton value="New" icon="pi pi-plus" process="@this" action="#{specialtiesView.addNew()}"
	                	oncomplete="PF('specialties').addRow();" styleClass="ui-button-success" style="margin-right: .5rem" />
	            </p:toolbarGroup>
	        </p:toolbar>
		
			<p:growl id="msg" showDetail="true" />
			
		    <div class="card">
		        <p:dataTable widgetVar="specialties" var="specialty" editable="true" editMode="cell" value="#{specialtiesView.specialties}"
		        	scrollable="true" scrollHeight="470">
		        	<p:ajax event="cellEdit" listener="#{specialtiesView.onCellEdit}" update=":form:msg" />
		            
		            <p:column headerText="Name">
			            <p:cellEditor>
		                    <f:facet name="output">
		                        <h:outputText value="#{specialty.specialtyName}" />
		                    </f:facet>
		                    <f:facet name="input">
		                        <p:inputText value="#{specialty.specialtyName}" style="width:100%"/>
		                    </f:facet>
		                </p:cellEditor>
		            </p:column>
		            
		            <p:column headerText="Requires validation months">
			            <p:cellEditor>
		                    <f:facet name="output">
		                        <h:outputText value="#{specialty.requiresValidationMonths ? 'Yes' : 'No'}"/>
		                    </f:facet>
		                    <f:facet name="input">
		                        <p:toggleSwitch value="#{specialty.requiresValidationMonths}" />
		                    </f:facet>
		                </p:cellEditor>
			        </p:column>
		        </p:dataTable>
		    </div>
		</h:form>
	</ui:define>
</ui:composition>
